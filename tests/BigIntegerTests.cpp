#include <gtest/gtest.h>

#include "linear/BigInteger.h"

TEST(BigIntegerTests, LongMultiplication) {
  std::vector<std::tuple<BigInteger, BigInteger, BigInteger>> problems;

  problems.emplace_back(
      "28709371489732048973219479381472314"_bi,
      "28709371489732048973219479381472314"_bi,
      "824228011335439408962133987486920906829562228582158513529938348514596"_bi);

  problems.emplace_back(
      "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"_bi,
      "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"_bi,
      "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999998000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"_bi);

  for (auto [a, b, c] : problems) {
    ASSERT_EQ(a * b, c);
  }
}

TEST(BigIntegerTests, RationalPower) {
  ASSERT_EQ(FieldTraits<Rational>::exp2(10), Rational{1024});
  ASSERT_EQ(FieldTraits<Rational>::exp2(-10), Rational{1} / 1024);
  ASSERT_EQ(FieldTraits<Rational>::exp2(0), Rational{1});
  ASSERT_EQ(FieldTraits<Rational>::exp2(1), Rational{2});
  ASSERT_EQ(FieldTraits<Rational>::exp2(-1), Rational{1} / 2);
}